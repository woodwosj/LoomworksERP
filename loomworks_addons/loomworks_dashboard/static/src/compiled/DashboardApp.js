/**
 * DashboardApp - Main React application wrapper for Loomworks Dashboard
 *
 * Entry point for the React dashboard canvas. Provides:
 * - Odoo context to all child components
 * - Dashboard state management
 * - Real-time data refresh
 */

const {
  useState,
  useEffect,
  useCallback,
  createContext,
  useContext
} = React;

// Odoo Context - provides access to Odoo services from React
const OdooContext = createContext(null);
function useOdoo() {
  const context = useContext(OdooContext);
  if (!context) {
    console.warn('useOdoo called outside OdooContext');
    return {};
  }
  return context;
}

// Dashboard App Component
function DashboardApp({
  dashboardId,
  dashboardData,
  mode = 'view',
  onSave,
  onWidgetAction,
  onFetchData,
  onModeChange,
  odooServices = {}
}) {
  const [widgets, setWidgets] = useState([]);
  const [filters, setFilters] = useState({});
  const [widgetData, setWidgetData] = useState({});
  const [isLoading, setIsLoading] = useState(true);
  const [isDirty, setIsDirty] = useState(false);
  const [selectedWidget, setSelectedWidget] = useState(null);
  const [showToolbox, setShowToolbox] = useState(mode === 'edit');

  // Initialize from dashboard data
  useEffect(() => {
    if (dashboardData) {
      setWidgets(dashboardData.widgets || []);
      // Initialize filters with default values
      const initialFilters = {};
      (dashboardData.filters || []).forEach(f => {
        if (f.defaultValue !== null && f.defaultValue !== undefined) {
          initialFilters[f.fieldName] = f.defaultValue;
        }
      });
      setFilters(initialFilters);
      setIsLoading(false);
    }
  }, [dashboardData]);

  // Fetch data for all widgets
  const refreshAllWidgets = useCallback(async () => {
    if (!onFetchData) return;
    const updates = {};
    for (const widget of widgets) {
      if (widget.dataSourceId || widget.inlineDataSource) {
        try {
          const data = await onFetchData(widget.id, filters);
          updates[widget.id] = data;
        } catch (error) {
          console.error(`Failed to fetch data for widget ${widget.id}:`, error);
          updates[widget.id] = {
            error: error.message
          };
        }
      }
    }
    setWidgetData(prev => ({
      ...prev,
      ...updates
    }));
  }, [widgets, filters, onFetchData]);

  // Refresh data when filters change
  useEffect(() => {
    refreshAllWidgets();
  }, [filters, refreshAllWidgets]);

  // Auto-refresh
  useEffect(() => {
    if (dashboardData?.autoRefresh && dashboardData.autoRefresh > 0 && mode === 'view') {
      const interval = setInterval(refreshAllWidgets, dashboardData.autoRefresh * 1000);
      return () => clearInterval(interval);
    }
  }, [dashboardData?.autoRefresh, mode, refreshAllWidgets]);

  // Handle widget position/size change
  const handleWidgetChange = useCallback((widgetId, changes) => {
    setWidgets(prev => prev.map(w => w.id === widgetId ? {
      ...w,
      ...changes
    } : w));
    setIsDirty(true);
  }, []);

  // Handle adding a new widget
  const handleAddWidget = useCallback(widgetConfig => {
    const newWidget = {
      id: `new_${Date.now()}`,
      ...widgetConfig
    };
    setWidgets(prev => [...prev, newWidget]);
    setIsDirty(true);
  }, []);

  // Handle deleting a widget
  const handleDeleteWidget = useCallback(widgetId => {
    setWidgets(prev => prev.filter(w => w.id !== widgetId));
    setIsDirty(true);
    setSelectedWidget(null);
  }, []);

  // Handle save
  const handleSave = useCallback(async () => {
    if (!onSave) return;
    const canvasData = {
      widgets: widgets.map(w => ({
        id: w.id,
        name: w.name,
        type: w.type,
        position: w.position,
        size: w.size,
        config: w.config,
        inlineDataSource: w.inlineDataSource
      })),
      filters
    };
    const success = await onSave(canvasData);
    if (success) {
      setIsDirty(false);
    }
  }, [widgets, filters, onSave]);

  // Handle filter change
  const handleFilterChange = useCallback((fieldName, value) => {
    setFilters(prev => ({
      ...prev,
      [fieldName]: value
    }));
  }, []);

  // Odoo context value
  const odooContextValue = {
    services: odooServices,
    rpc: odooServices.rpc,
    notification: odooServices.notification,
    action: odooServices.action
  };
  if (isLoading) {
    return /*#__PURE__*/React.createElement("div", {
      className: "lw-dashboard-loading"
    }, /*#__PURE__*/React.createElement("div", {
      className: "lw-loading-content"
    }, /*#__PURE__*/React.createElement("i", {
      className: "fa fa-spinner fa-spin fa-3x"
    }), /*#__PURE__*/React.createElement("p", null, "Loading dashboard...")));
  }
  return /*#__PURE__*/React.createElement(OdooContext.Provider, {
    value: odooContextValue
  }, /*#__PURE__*/React.createElement("div", {
    className: "lw-dashboard-app"
  }, mode === 'edit' && /*#__PURE__*/React.createElement("div", {
    className: "lw-dashboard-edit-toolbar"
  }, /*#__PURE__*/React.createElement("button", {
    className: "lw-btn lw-btn-secondary",
    onClick: () => setShowToolbox(!showToolbox)
  }, /*#__PURE__*/React.createElement("i", {
    className: "fa fa-plus"
  }), " Add Widget"), /*#__PURE__*/React.createElement("button", {
    className: `lw-btn ${isDirty ? 'lw-btn-primary' : 'lw-btn-secondary'}`,
    onClick: handleSave,
    disabled: !isDirty
  }, /*#__PURE__*/React.createElement("i", {
    className: "fa fa-save"
  }), " Save"), /*#__PURE__*/React.createElement("button", {
    className: "lw-btn lw-btn-secondary",
    onClick: refreshAllWidgets
  }, /*#__PURE__*/React.createElement("i", {
    className: "fa fa-refresh"
  }), " Refresh")), /*#__PURE__*/React.createElement("div", {
    className: "lw-dashboard-content"
  }, mode === 'edit' && showToolbox && /*#__PURE__*/React.createElement(WidgetToolbox, {
    onAddWidget: handleAddWidget,
    onClose: () => setShowToolbox(false)
  }), /*#__PURE__*/React.createElement(DashboardCanvas, {
    widgets: widgets,
    widgetData: widgetData,
    filters: filters,
    mode: mode,
    layoutColumns: dashboardData?.layoutColumns || 12,
    onWidgetChange: handleWidgetChange,
    onWidgetSelect: setSelectedWidget,
    onWidgetAction: onWidgetAction,
    onDeleteWidget: handleDeleteWidget
  }), mode === 'edit' && selectedWidget && /*#__PURE__*/React.createElement(WidgetPropertiesPanel, {
    widget: widgets.find(w => w.id === selectedWidget),
    onUpdate: updates => handleWidgetChange(selectedWidget, updates),
    onDelete: () => handleDeleteWidget(selectedWidget),
    onClose: () => setSelectedWidget(null)
  })), (dashboardData?.filters || []).length > 0 && /*#__PURE__*/React.createElement("div", {
    className: "lw-dashboard-filters"
  }, dashboardData.filters.map(filter => /*#__PURE__*/React.createElement(FilterControl, {
    key: filter.id,
    filter: filter,
    value: filters[filter.fieldName],
    onChange: value => handleFilterChange(filter.fieldName, value)
  })))));
}

// Export for global access
window.LoomworksDashboardApp = DashboardApp;
window.useOdoo = useOdoo;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsInVzZUNhbGxiYWNrIiwiY3JlYXRlQ29udGV4dCIsInVzZUNvbnRleHQiLCJSZWFjdCIsIk9kb29Db250ZXh0IiwidXNlT2RvbyIsImNvbnRleHQiLCJjb25zb2xlIiwid2FybiIsIkRhc2hib2FyZEFwcCIsImRhc2hib2FyZElkIiwiZGFzaGJvYXJkRGF0YSIsIm1vZGUiLCJvblNhdmUiLCJvbldpZGdldEFjdGlvbiIsIm9uRmV0Y2hEYXRhIiwib25Nb2RlQ2hhbmdlIiwib2Rvb1NlcnZpY2VzIiwid2lkZ2V0cyIsInNldFdpZGdldHMiLCJmaWx0ZXJzIiwic2V0RmlsdGVycyIsIndpZGdldERhdGEiLCJzZXRXaWRnZXREYXRhIiwiaXNMb2FkaW5nIiwic2V0SXNMb2FkaW5nIiwiaXNEaXJ0eSIsInNldElzRGlydHkiLCJzZWxlY3RlZFdpZGdldCIsInNldFNlbGVjdGVkV2lkZ2V0Iiwic2hvd1Rvb2xib3giLCJzZXRTaG93VG9vbGJveCIsImluaXRpYWxGaWx0ZXJzIiwiZm9yRWFjaCIsImYiLCJkZWZhdWx0VmFsdWUiLCJ1bmRlZmluZWQiLCJmaWVsZE5hbWUiLCJyZWZyZXNoQWxsV2lkZ2V0cyIsInVwZGF0ZXMiLCJ3aWRnZXQiLCJkYXRhU291cmNlSWQiLCJpbmxpbmVEYXRhU291cmNlIiwiZGF0YSIsImlkIiwiZXJyb3IiLCJtZXNzYWdlIiwicHJldiIsImF1dG9SZWZyZXNoIiwiaW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsImNsZWFySW50ZXJ2YWwiLCJoYW5kbGVXaWRnZXRDaGFuZ2UiLCJ3aWRnZXRJZCIsImNoYW5nZXMiLCJtYXAiLCJ3IiwiaGFuZGxlQWRkV2lkZ2V0Iiwid2lkZ2V0Q29uZmlnIiwibmV3V2lkZ2V0IiwiRGF0ZSIsIm5vdyIsImhhbmRsZURlbGV0ZVdpZGdldCIsImZpbHRlciIsImhhbmRsZVNhdmUiLCJjYW52YXNEYXRhIiwibmFtZSIsInR5cGUiLCJwb3NpdGlvbiIsInNpemUiLCJjb25maWciLCJzdWNjZXNzIiwiaGFuZGxlRmlsdGVyQ2hhbmdlIiwidmFsdWUiLCJvZG9vQ29udGV4dFZhbHVlIiwic2VydmljZXMiLCJycGMiLCJub3RpZmljYXRpb24iLCJhY3Rpb24iLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwiUHJvdmlkZXIiLCJvbkNsaWNrIiwiZGlzYWJsZWQiLCJXaWRnZXRUb29sYm94Iiwib25BZGRXaWRnZXQiLCJvbkNsb3NlIiwiRGFzaGJvYXJkQ2FudmFzIiwibGF5b3V0Q29sdW1ucyIsIm9uV2lkZ2V0Q2hhbmdlIiwib25XaWRnZXRTZWxlY3QiLCJvbkRlbGV0ZVdpZGdldCIsIldpZGdldFByb3BlcnRpZXNQYW5lbCIsImZpbmQiLCJvblVwZGF0ZSIsIm9uRGVsZXRlIiwibGVuZ3RoIiwiRmlsdGVyQ29udHJvbCIsImtleSIsIm9uQ2hhbmdlIiwid2luZG93IiwiTG9vbXdvcmtzRGFzaGJvYXJkQXBwIl0sInNvdXJjZXMiOlsiLi4vcmVhY3QvRGFzaGJvYXJkQXBwLmpzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIERhc2hib2FyZEFwcCAtIE1haW4gUmVhY3QgYXBwbGljYXRpb24gd3JhcHBlciBmb3IgTG9vbXdvcmtzIERhc2hib2FyZFxuICpcbiAqIEVudHJ5IHBvaW50IGZvciB0aGUgUmVhY3QgZGFzaGJvYXJkIGNhbnZhcy4gUHJvdmlkZXM6XG4gKiAtIE9kb28gY29udGV4dCB0byBhbGwgY2hpbGQgY29tcG9uZW50c1xuICogLSBEYXNoYm9hcmQgc3RhdGUgbWFuYWdlbWVudFxuICogLSBSZWFsLXRpbWUgZGF0YSByZWZyZXNoXG4gKi9cblxuY29uc3QgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VDYWxsYmFjaywgY3JlYXRlQ29udGV4dCwgdXNlQ29udGV4dCB9ID0gUmVhY3Q7XG5cbi8vIE9kb28gQ29udGV4dCAtIHByb3ZpZGVzIGFjY2VzcyB0byBPZG9vIHNlcnZpY2VzIGZyb20gUmVhY3RcbmNvbnN0IE9kb29Db250ZXh0ID0gY3JlYXRlQ29udGV4dChudWxsKTtcblxuZnVuY3Rpb24gdXNlT2RvbygpIHtcbiAgICBjb25zdCBjb250ZXh0ID0gdXNlQ29udGV4dChPZG9vQ29udGV4dCk7XG4gICAgaWYgKCFjb250ZXh0KSB7XG4gICAgICAgIGNvbnNvbGUud2FybigndXNlT2RvbyBjYWxsZWQgb3V0c2lkZSBPZG9vQ29udGV4dCcpO1xuICAgICAgICByZXR1cm4ge307XG4gICAgfVxuICAgIHJldHVybiBjb250ZXh0O1xufVxuXG4vLyBEYXNoYm9hcmQgQXBwIENvbXBvbmVudFxuZnVuY3Rpb24gRGFzaGJvYXJkQXBwKHtcbiAgICBkYXNoYm9hcmRJZCxcbiAgICBkYXNoYm9hcmREYXRhLFxuICAgIG1vZGUgPSAndmlldycsXG4gICAgb25TYXZlLFxuICAgIG9uV2lkZ2V0QWN0aW9uLFxuICAgIG9uRmV0Y2hEYXRhLFxuICAgIG9uTW9kZUNoYW5nZSxcbiAgICBvZG9vU2VydmljZXMgPSB7fSxcbn0pIHtcbiAgICBjb25zdCBbd2lkZ2V0cywgc2V0V2lkZ2V0c10gPSB1c2VTdGF0ZShbXSk7XG4gICAgY29uc3QgW2ZpbHRlcnMsIHNldEZpbHRlcnNdID0gdXNlU3RhdGUoe30pO1xuICAgIGNvbnN0IFt3aWRnZXREYXRhLCBzZXRXaWRnZXREYXRhXSA9IHVzZVN0YXRlKHt9KTtcbiAgICBjb25zdCBbaXNMb2FkaW5nLCBzZXRJc0xvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSk7XG4gICAgY29uc3QgW2lzRGlydHksIHNldElzRGlydHldID0gdXNlU3RhdGUoZmFsc2UpO1xuICAgIGNvbnN0IFtzZWxlY3RlZFdpZGdldCwgc2V0U2VsZWN0ZWRXaWRnZXRdID0gdXNlU3RhdGUobnVsbCk7XG4gICAgY29uc3QgW3Nob3dUb29sYm94LCBzZXRTaG93VG9vbGJveF0gPSB1c2VTdGF0ZShtb2RlID09PSAnZWRpdCcpO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSBmcm9tIGRhc2hib2FyZCBkYXRhXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKGRhc2hib2FyZERhdGEpIHtcbiAgICAgICAgICAgIHNldFdpZGdldHMoZGFzaGJvYXJkRGF0YS53aWRnZXRzIHx8IFtdKTtcbiAgICAgICAgICAgIC8vIEluaXRpYWxpemUgZmlsdGVycyB3aXRoIGRlZmF1bHQgdmFsdWVzXG4gICAgICAgICAgICBjb25zdCBpbml0aWFsRmlsdGVycyA9IHt9O1xuICAgICAgICAgICAgKGRhc2hib2FyZERhdGEuZmlsdGVycyB8fCBbXSkuZm9yRWFjaChmID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZi5kZWZhdWx0VmFsdWUgIT09IG51bGwgJiYgZi5kZWZhdWx0VmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBpbml0aWFsRmlsdGVyc1tmLmZpZWxkTmFtZV0gPSBmLmRlZmF1bHRWYWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHNldEZpbHRlcnMoaW5pdGlhbEZpbHRlcnMpO1xuICAgICAgICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH0sIFtkYXNoYm9hcmREYXRhXSk7XG5cbiAgICAvLyBGZXRjaCBkYXRhIGZvciBhbGwgd2lkZ2V0c1xuICAgIGNvbnN0IHJlZnJlc2hBbGxXaWRnZXRzID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICBpZiAoIW9uRmV0Y2hEYXRhKSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgdXBkYXRlcyA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IHdpZGdldCBvZiB3aWRnZXRzKSB7XG4gICAgICAgICAgICBpZiAod2lkZ2V0LmRhdGFTb3VyY2VJZCB8fCB3aWRnZXQuaW5saW5lRGF0YVNvdXJjZSkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBvbkZldGNoRGF0YSh3aWRnZXQuaWQsIGZpbHRlcnMpO1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGVzW3dpZGdldC5pZF0gPSBkYXRhO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBmZXRjaCBkYXRhIGZvciB3aWRnZXQgJHt3aWRnZXQuaWR9OmAsIGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlc1t3aWRnZXQuaWRdID0geyBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzZXRXaWRnZXREYXRhKHByZXYgPT4gKHsgLi4ucHJldiwgLi4udXBkYXRlcyB9KSk7XG4gICAgfSwgW3dpZGdldHMsIGZpbHRlcnMsIG9uRmV0Y2hEYXRhXSk7XG5cbiAgICAvLyBSZWZyZXNoIGRhdGEgd2hlbiBmaWx0ZXJzIGNoYW5nZVxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIHJlZnJlc2hBbGxXaWRnZXRzKCk7XG4gICAgfSwgW2ZpbHRlcnMsIHJlZnJlc2hBbGxXaWRnZXRzXSk7XG5cbiAgICAvLyBBdXRvLXJlZnJlc2hcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpZiAoZGFzaGJvYXJkRGF0YT8uYXV0b1JlZnJlc2ggJiYgZGFzaGJvYXJkRGF0YS5hdXRvUmVmcmVzaCA+IDAgJiYgbW9kZSA9PT0gJ3ZpZXcnKSB7XG4gICAgICAgICAgICBjb25zdCBpbnRlcnZhbCA9IHNldEludGVydmFsKHJlZnJlc2hBbGxXaWRnZXRzLCBkYXNoYm9hcmREYXRhLmF1dG9SZWZyZXNoICogMTAwMCk7XG4gICAgICAgICAgICByZXR1cm4gKCkgPT4gY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XG4gICAgICAgIH1cbiAgICB9LCBbZGFzaGJvYXJkRGF0YT8uYXV0b1JlZnJlc2gsIG1vZGUsIHJlZnJlc2hBbGxXaWRnZXRzXSk7XG5cbiAgICAvLyBIYW5kbGUgd2lkZ2V0IHBvc2l0aW9uL3NpemUgY2hhbmdlXG4gICAgY29uc3QgaGFuZGxlV2lkZ2V0Q2hhbmdlID0gdXNlQ2FsbGJhY2soKHdpZGdldElkLCBjaGFuZ2VzKSA9PiB7XG4gICAgICAgIHNldFdpZGdldHMocHJldiA9PiBwcmV2Lm1hcCh3ID0+XG4gICAgICAgICAgICB3LmlkID09PSB3aWRnZXRJZCA/IHsgLi4udywgLi4uY2hhbmdlcyB9IDogd1xuICAgICAgICApKTtcbiAgICAgICAgc2V0SXNEaXJ0eSh0cnVlKTtcbiAgICB9LCBbXSk7XG5cbiAgICAvLyBIYW5kbGUgYWRkaW5nIGEgbmV3IHdpZGdldFxuICAgIGNvbnN0IGhhbmRsZUFkZFdpZGdldCA9IHVzZUNhbGxiYWNrKCh3aWRnZXRDb25maWcpID0+IHtcbiAgICAgICAgY29uc3QgbmV3V2lkZ2V0ID0ge1xuICAgICAgICAgICAgaWQ6IGBuZXdfJHtEYXRlLm5vdygpfWAsXG4gICAgICAgICAgICAuLi53aWRnZXRDb25maWcsXG4gICAgICAgIH07XG4gICAgICAgIHNldFdpZGdldHMocHJldiA9PiBbLi4ucHJldiwgbmV3V2lkZ2V0XSk7XG4gICAgICAgIHNldElzRGlydHkodHJ1ZSk7XG4gICAgfSwgW10pO1xuXG4gICAgLy8gSGFuZGxlIGRlbGV0aW5nIGEgd2lkZ2V0XG4gICAgY29uc3QgaGFuZGxlRGVsZXRlV2lkZ2V0ID0gdXNlQ2FsbGJhY2soKHdpZGdldElkKSA9PiB7XG4gICAgICAgIHNldFdpZGdldHMocHJldiA9PiBwcmV2LmZpbHRlcih3ID0+IHcuaWQgIT09IHdpZGdldElkKSk7XG4gICAgICAgIHNldElzRGlydHkodHJ1ZSk7XG4gICAgICAgIHNldFNlbGVjdGVkV2lkZ2V0KG51bGwpO1xuICAgIH0sIFtdKTtcblxuICAgIC8vIEhhbmRsZSBzYXZlXG4gICAgY29uc3QgaGFuZGxlU2F2ZSA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgaWYgKCFvblNhdmUpIHJldHVybjtcblxuICAgICAgICBjb25zdCBjYW52YXNEYXRhID0ge1xuICAgICAgICAgICAgd2lkZ2V0czogd2lkZ2V0cy5tYXAodyA9PiAoe1xuICAgICAgICAgICAgICAgIGlkOiB3LmlkLFxuICAgICAgICAgICAgICAgIG5hbWU6IHcubmFtZSxcbiAgICAgICAgICAgICAgICB0eXBlOiB3LnR5cGUsXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IHcucG9zaXRpb24sXG4gICAgICAgICAgICAgICAgc2l6ZTogdy5zaXplLFxuICAgICAgICAgICAgICAgIGNvbmZpZzogdy5jb25maWcsXG4gICAgICAgICAgICAgICAgaW5saW5lRGF0YVNvdXJjZTogdy5pbmxpbmVEYXRhU291cmNlLFxuICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgZmlsdGVycyxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBzdWNjZXNzID0gYXdhaXQgb25TYXZlKGNhbnZhc0RhdGEpO1xuICAgICAgICBpZiAoc3VjY2Vzcykge1xuICAgICAgICAgICAgc2V0SXNEaXJ0eShmYWxzZSk7XG4gICAgICAgIH1cbiAgICB9LCBbd2lkZ2V0cywgZmlsdGVycywgb25TYXZlXSk7XG5cbiAgICAvLyBIYW5kbGUgZmlsdGVyIGNoYW5nZVxuICAgIGNvbnN0IGhhbmRsZUZpbHRlckNoYW5nZSA9IHVzZUNhbGxiYWNrKChmaWVsZE5hbWUsIHZhbHVlKSA9PiB7XG4gICAgICAgIHNldEZpbHRlcnMocHJldiA9PiAoe1xuICAgICAgICAgICAgLi4ucHJldixcbiAgICAgICAgICAgIFtmaWVsZE5hbWVdOiB2YWx1ZSxcbiAgICAgICAgfSkpO1xuICAgIH0sIFtdKTtcblxuICAgIC8vIE9kb28gY29udGV4dCB2YWx1ZVxuICAgIGNvbnN0IG9kb29Db250ZXh0VmFsdWUgPSB7XG4gICAgICAgIHNlcnZpY2VzOiBvZG9vU2VydmljZXMsXG4gICAgICAgIHJwYzogb2Rvb1NlcnZpY2VzLnJwYyxcbiAgICAgICAgbm90aWZpY2F0aW9uOiBvZG9vU2VydmljZXMubm90aWZpY2F0aW9uLFxuICAgICAgICBhY3Rpb246IG9kb29TZXJ2aWNlcy5hY3Rpb24sXG4gICAgfTtcblxuICAgIGlmIChpc0xvYWRpbmcpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibHctZGFzaGJvYXJkLWxvYWRpbmdcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImx3LWxvYWRpbmctY29udGVudFwiPlxuICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1zcGlubmVyIGZhLXNwaW4gZmEtM3hcIj48L2k+XG4gICAgICAgICAgICAgICAgICAgIDxwPkxvYWRpbmcgZGFzaGJvYXJkLi4uPC9wPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgICAgPE9kb29Db250ZXh0LlByb3ZpZGVyIHZhbHVlPXtvZG9vQ29udGV4dFZhbHVlfT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibHctZGFzaGJvYXJkLWFwcFwiPlxuICAgICAgICAgICAgICAgIHsvKiBUb29sYmFyIChlZGl0IG1vZGUpICovfVxuICAgICAgICAgICAgICAgIHttb2RlID09PSAnZWRpdCcgJiYgKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImx3LWRhc2hib2FyZC1lZGl0LXRvb2xiYXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJsdy1idG4gbHctYnRuLXNlY29uZGFyeVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0U2hvd1Rvb2xib3goIXNob3dUb29sYm94KX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1wbHVzXCI+PC9pPiBBZGQgV2lkZ2V0XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2Bsdy1idG4gJHtpc0RpcnR5ID8gJ2x3LWJ0bi1wcmltYXJ5JyA6ICdsdy1idG4tc2Vjb25kYXJ5J31gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZVNhdmV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9eyFpc0RpcnR5fVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImZhIGZhLXNhdmVcIj48L2k+IFNhdmVcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImx3LWJ0biBsdy1idG4tc2Vjb25kYXJ5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtyZWZyZXNoQWxsV2lkZ2V0c31cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1yZWZyZXNoXCI+PC9pPiBSZWZyZXNoXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKX1cblxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibHctZGFzaGJvYXJkLWNvbnRlbnRcIj5cbiAgICAgICAgICAgICAgICAgICAgey8qIFdpZGdldCBUb29sYm94ICovfVxuICAgICAgICAgICAgICAgICAgICB7bW9kZSA9PT0gJ2VkaXQnICYmIHNob3dUb29sYm94ICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxXaWRnZXRUb29sYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25BZGRXaWRnZXQ9e2hhbmRsZUFkZFdpZGdldH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsb3NlPXsoKSA9PiBzZXRTaG93VG9vbGJveChmYWxzZSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICApfVxuXG4gICAgICAgICAgICAgICAgICAgIHsvKiBEYXNoYm9hcmQgQ2FudmFzICovfVxuICAgICAgICAgICAgICAgICAgICA8RGFzaGJvYXJkQ2FudmFzXG4gICAgICAgICAgICAgICAgICAgICAgICB3aWRnZXRzPXt3aWRnZXRzfVxuICAgICAgICAgICAgICAgICAgICAgICAgd2lkZ2V0RGF0YT17d2lkZ2V0RGF0YX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcnM9e2ZpbHRlcnN9XG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RlPXttb2RlfVxuICAgICAgICAgICAgICAgICAgICAgICAgbGF5b3V0Q29sdW1ucz17ZGFzaGJvYXJkRGF0YT8ubGF5b3V0Q29sdW1ucyB8fCAxMn1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uV2lkZ2V0Q2hhbmdlPXtoYW5kbGVXaWRnZXRDaGFuZ2V9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbldpZGdldFNlbGVjdD17c2V0U2VsZWN0ZWRXaWRnZXR9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbldpZGdldEFjdGlvbj17b25XaWRnZXRBY3Rpb259XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkRlbGV0ZVdpZGdldD17aGFuZGxlRGVsZXRlV2lkZ2V0fVxuICAgICAgICAgICAgICAgICAgICAvPlxuXG4gICAgICAgICAgICAgICAgICAgIHsvKiBXaWRnZXQgUHJvcGVydGllcyBQYW5lbCAqL31cbiAgICAgICAgICAgICAgICAgICAge21vZGUgPT09ICdlZGl0JyAmJiBzZWxlY3RlZFdpZGdldCAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8V2lkZ2V0UHJvcGVydGllc1BhbmVsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkZ2V0PXt3aWRnZXRzLmZpbmQodyA9PiB3LmlkID09PSBzZWxlY3RlZFdpZGdldCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25VcGRhdGU9eyh1cGRhdGVzKSA9PiBoYW5kbGVXaWRnZXRDaGFuZ2Uoc2VsZWN0ZWRXaWRnZXQsIHVwZGF0ZXMpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRGVsZXRlPXsoKSA9PiBoYW5kbGVEZWxldGVXaWRnZXQoc2VsZWN0ZWRXaWRnZXQpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xvc2U9eygpID0+IHNldFNlbGVjdGVkV2lkZ2V0KG51bGwpfVxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgIHsvKiBHbG9iYWwgRmlsdGVycyAqL31cbiAgICAgICAgICAgICAgICB7KGRhc2hib2FyZERhdGE/LmZpbHRlcnMgfHwgW10pLmxlbmd0aCA+IDAgJiYgKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImx3LWRhc2hib2FyZC1maWx0ZXJzXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7ZGFzaGJvYXJkRGF0YS5maWx0ZXJzLm1hcChmaWx0ZXIgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGaWx0ZXJDb250cm9sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17ZmlsdGVyLmlkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXI9e2ZpbHRlcn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2ZpbHRlcnNbZmlsdGVyLmZpZWxkTmFtZV19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWUpID0+IGhhbmRsZUZpbHRlckNoYW5nZShmaWx0ZXIuZmllbGROYW1lLCB2YWx1ZSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvT2Rvb0NvbnRleHQuUHJvdmlkZXI+XG4gICAgKTtcbn1cblxuLy8gRXhwb3J0IGZvciBnbG9iYWwgYWNjZXNzXG53aW5kb3cuTG9vbXdvcmtzRGFzaGJvYXJkQXBwID0gRGFzaGJvYXJkQXBwO1xud2luZG93LnVzZU9kb28gPSB1c2VPZG9vO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE1BQU07RUFBRUEsUUFBUTtFQUFFQyxTQUFTO0VBQUVDLFdBQVc7RUFBRUMsYUFBYTtFQUFFQztBQUFXLENBQUMsR0FBR0MsS0FBSzs7QUFFN0U7QUFDQSxNQUFNQyxXQUFXLEdBQUdILGFBQWEsQ0FBQyxJQUFJLENBQUM7QUFFdkMsU0FBU0ksT0FBT0EsQ0FBQSxFQUFHO0VBQ2YsTUFBTUMsT0FBTyxHQUFHSixVQUFVLENBQUNFLFdBQVcsQ0FBQztFQUN2QyxJQUFJLENBQUNFLE9BQU8sRUFBRTtJQUNWQyxPQUFPLENBQUNDLElBQUksQ0FBQyxvQ0FBb0MsQ0FBQztJQUNsRCxPQUFPLENBQUMsQ0FBQztFQUNiO0VBQ0EsT0FBT0YsT0FBTztBQUNsQjs7QUFFQTtBQUNBLFNBQVNHLFlBQVlBLENBQUM7RUFDbEJDLFdBQVc7RUFDWEMsYUFBYTtFQUNiQyxJQUFJLEdBQUcsTUFBTTtFQUNiQyxNQUFNO0VBQ05DLGNBQWM7RUFDZEMsV0FB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